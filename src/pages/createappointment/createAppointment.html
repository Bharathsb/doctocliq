<!--
  Generated template for the ModalfiltersPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header class="appointment-header">

  <ion-navbar>
    <ion-title text-center>{{ title | translate }}</ion-title>
    <ion-buttons end>
      <button ion-button (click)="closeModal()">{{ 'Close' | translate }}</button>
    </ion-buttons>
  </ion-navbar>

</ion-header>
<ion-content padding *ngIf="this.type !== 'Update'">
  <ion-row margin-top>
    <ion-item (click)="gotoSearch1();">
      <p class="rowdata">{{ 'Patient' | translate }}</p>
      <ion-searchbar [(ngModel)]="patientName" placeholder="{{ 'Choose patient' | translate }}"></ion-searchbar>
    </ion-item>
  </ion-row>
  <form [formGroup]="appointmentForm" *ngIf="appointmentForm">
    <ion-row>
      <ion-item>
        <ion-label floating>{{ 'Speciality' | translate }}</ion-label>
        <ion-select formControlName="especialidade" (ionChange)="onSelectedSpeciality($event)">
          <ion-option *ngFor="let specialityObj of lista_especialidades" [value]="specialityObj.name">{{specialityObj.name}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-row>
    <ion-row>
      <ion-item>
        <ion-label floating>{{ 'Doctor' | translate }}</ion-label>
        <ion-select formControlName="doctore" (ionChange)="selectedDoctor($event)">
          <ion-option *ngFor="let doctorObj of lista_doctores" [value]="doctorObj.id">{{doctorObj.name}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-row>

    <ion-row>
      <ion-item>
        <ion-label floating>{{ 'Date' | translate }}</ion-label>
        <ion-datetime displayFormat="DD/MM/YYYY" formControlName="datePicker"></ion-datetime>
      </ion-item>
    </ion-row>

    <ion-row>
      <ion-item>
        <ion-label floating>{{ 'Hour' | translate }}</ion-label>
        <ion-select formControlName="horario">
          <ion-option *ngFor="let horaObj of list_horario" [value]="horaObj">{{horaObj}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-row>

    <ion-row>
      <ion-item>
        <ion-label floating>{{'Duration' | translate}}</ion-label>
        <ion-select formControlName="duracione">
          <ion-option *ngFor="let durationObj of list_duration" [value]="durationObj.id">{{durationObj.value}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-row>

    <ion-row>
      <ion-item>
        <ion-label floating>{{'Reason' | translate}}</ion-label>
        <ion-select formControlName="motivo" (ionChange)="selectedReason($event)">
          <ion-option *ngFor="let motivoObj of list_motivo" [value]="motivoObj.id">{{motivoObj.title}}</ion-option>
        </ion-select>
      </ion-item>
    </ion-row>

    <ion-row>
      <ion-item>
        <ion-label floating>{{'Price' | translate}}</ion-label>
        <div class="input-group-addon">S/. </div>
        <ion-input type="number" formControlName="reason_price"></ion-input>
      </ion-item>
    </ion-row>

    <ion-row>
      <ion-item>
        <ion-label floating>{{'Comment of the appointment' | translate}}</ion-label>
        <ion-textarea formControlName="comment_appointment" rows="3"></ion-textarea>
      </ion-item>
    </ion-row>

  </form>
  <ion-row class="appointment-btn">
    <button ion-button color="secondary" block margin-top (click)="creatApointment();">
      {{ 'Create appointment' | translate }}
    </button>
  </ion-row>
</ion-content>

<ion-content padding *ngIf="this.type === 'Update'">
  <ion-row margin-top>
    <ion-col col-4>
      <p class="rowdata">{{ 'Patient' | translate }}</p>
    </ion-col>
    <ion-col col-8>
      <p text-right>{{appointmentModel.patientName}}</p>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-4>
      <p class="rowdata">{{ 'Speciality' | translate }}</p>
    </ion-col>
    <ion-col col-8>
      <p text-right>{{appointmentModel.especialidade}}</p>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-4>
      <p class="rowdata">{{ 'Doctor' | translate }}</p>
    </ion-col>
    <ion-col col-8>
      <p text-right>{{appointmentModel.doctorName}}</p>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-4>
      <p class="rowdata">{{ 'Date' | translate }}</p>
    </ion-col>
    <ion-col col-8>
      <p text-right>{{appointmentModel.datePicker}}</p>
    </ion-col>
  </ion-row>

  <ion-row>
    <ion-col col-4>
      <p class="rowdata">{{ 'Hour' | translate }}</p>
    </ion-col>
    <ion-col col-8>
      <p text-right>{{appointmentModel.horario}}</p>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-4>
      <p class="rowdata">{{'Reason' | translate}}</p>
    </ion-col>
    <ion-col col-8>
      <ion-select [(ngModel)]="appointmentModel.motivo" class="update-dropdown-select" (ionChange)="selectedReason($event)">
        <ion-option *ngFor="let motivoObj of list_motivo" [value]="motivoObj.id">{{motivoObj.title}}</ion-option>
      </ion-select>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-col col-4>
      <p class="rowdata">{{'Price' | translate}}</p>
    </ion-col>
    <ion-col col-8>
      <ion-input type="number" class="update-dropdown-select" [(ngModel)]="appointmentModel.reason_price"></ion-input>
    </ion-col>
  </ion-row>
  <ion-row>
    <ion-item>
      <ion-label floating>{{'Comment of the patient' | translate}}</ion-label>
      <ion-textarea [(ngModel)]="appointmentModel.comment_patient" rows="3" readonly></ion-textarea>
    </ion-item>
  </ion-row>
  <ion-row>
    <ion-item>
      <ion-label floating>{{'Comment of the appointment' | translate}}</ion-label>
      <ion-textarea [(ngModel)]="appointmentModel.comment_appointment" rows="3"></ion-textarea>
    </ion-item>
  </ion-row>
  <ion-row>
    <ion-item>
      <ion-label floating>{{'Doctors comment' | translate}}</ion-label>
      <ion-textarea [(ngModel)]="appointmentModel.comment_doctor" rows="3"></ion-textarea>
    </ion-item>
  </ion-row>
  <ion-row>
    <ion-item>
      <ion-label floating>{{'State' | translate}}</ion-label>
      <ion-select [(ngModel)]="appointmentModel.estado">
        <ion-option *ngFor="let estado of lista_estados" [value]="estado.id">{{estado.value}}</ion-option>
      </ion-select>
    </ion-item>
  </ion-row>

  <ion-row class="appointment-btn">
    <button ion-button color="secondary" block margin-top (click)="updateApointment();">
      {{ 'Update' | translate }}
    </button>
    <button ion-button color="secondary" block margin-top (click)="remove();">
      {{ 'Remove' | translate }}
    </button>
  </ion-row>
</ion-content>